const mongoose = require('mongoose');
const Aroma = require('../models/aromaDB.js'); // Путь к вашей модели Aroma

// Данные ароматов
const aromaCategory = [
  "Цветочный", "Фруктовый", "Пряный", "Ореховый", "Травяной", "Древесный",
  "Землистый", "Сладкий", "Жареный", "Морской", "Смолистый", "Молочный",
  "Минеральный", "Хлебный", "Шоколадный"
];

const aromaSubcategory = {
  Цветочный: ["Жасмин", "Роза", "Лаванда", "Ромашка", "Фиалка", "Пион"],
  Фруктовый: [
    "Цитрусовый", "Тропический", "Ягодный", "Косточковый фрукт",
    "Яблочный", "Сушёный фрукт"
  ],
  Пряный: ["Корица", "Гвоздика", "Имбирь", "Анис", "Кардамон", "Мускатный орех", "Перец"],
  Ореховый: ["Миндаль", "Фундук", "Кешью", "Кокос", "Кедровый орех"],
  Травяной: ["Мята", "Шалфей", "Тимьян", "Эвкалипт", "Зелёный чай", "Мелисса", "Сено"],
  Древесный: ["Дуб", "Сосна", "Кедр", "Сандал", "Бамбук", "Берёза"],
  Землистый: ["Свекла", "Сырой картофель", "Мокрая земля", "Грибы", "Мох"],
  Сладкий: ["Мёд", "Карамель", "Ваниль", "Сахар", "Ириска", "Марципан"],
  Жареный: ["Кофе", "Какао", "Жареный хлеб", "Семя кунжута", "Орех", "Обжаренный ячмень"],
  Морской: ["Водоросль", "Йод", "Морской воздух", "Мокрый песок", "Свежая рыба"],
  Смолистый: ["Смола сосны", "Ладан", "Амбра", "Элеми"],
  Молочный: ["Сливка", "Молоко", "Сгущёнка", "Молочный шоколад"],
  Минеральный: ["Камень", "Мокрый цемент", "Металл", "Солёная вода"],
  Хлебный: ["Свежий хлеб", "Жареный хлеб", "Печенье", "Сухарь", "Дрожжевое тесто"],
  Шоколадный: ["Молочный шоколад", "Горький шоколад", "Какао-порошок", "Белый шоколад"]
};

const aromaDescriptors = {
  Цитрусовый: ["Лимон", "Апельсин", "Мандарин", "Грейпфрут", "Бергамот", "Лайм", "Юзу"],
  Тропический: ["Манго", "Ананас", "Папайя", "Маракуйя", "Личи", "Гуава"],
  Ягодный: ["Малина", "Клубника", "Смородина", "Черника", "Ежевика", "Клюква", "Брусника"],
  Косточковый: ["Вишня", "Слива", "Абрикос", "Персик", "Нектарин"],
  Сушёный: ["Инжир", "Финик", "Чернослив", "Курага", "Сушёное яблоко"],
  Жасмин: ["Свежий жасмин", "Сухой жасмин", "Зелёный жасмин"],
  Роза: ["Сухая роза", "Свежая роза", "Дикая роза", "Розовая вода"],
  Корица: ["Молотая корица", "Корица в палочках"],
  Ваниль: ["Свежая ваниль", "Синтетическая ваниль", "Ванильные бобы"],
  Мята: ["Свежая мята", "Мята перечная", "Мята яблочная"],
  Гвоздика: ["Молотая гвоздика", "Гвоздичный цветок"],
  Дуб: ["Дубовая кора", "Сухая древесина дуба", "Копчёный дуб"],
  Свежий_хлеб: ["Белый хлеб", "Ржаной хлеб", "Багет"],
  Печенье: ["Песочное", "Овсяное", "Сдобное"],
  Камень: ["Мокрый камень", "Галька", "Мрамор"],
  Молочные: ["Топлёное молоко", "Сгущённое молоко", "Кремовый сыр"]
};

// Подключаемся к MongoDB
mongoose.connect('mongodb://localhost:27017/teadb', {
  useNewUrlParser: true,
  useUnifiedTopology: true
})
  .then(async () => {
    console.log('Connected to MongoDB');

    // Очистим коллекцию перед загрузкой данных
    await Aroma.deleteMany({});

    // Формируем и вставляем данные
    const aromas = aromaCategory.map(category => ({
      category,
      subcategories: aromaSubcategory[category].map(subcategory => ({
        name: subcategory,
        descriptors: aromaDescriptors[subcategory] || []
      }))
    }));

    await Aroma.insertMany(aromas);

    console.log('Aromas data inserted successfully');

    // Закрываем соединение с базой данных
    mongoose.connection.close();
  })
  .catch(err => {
    console.error('Error connecting to MongoDB:', err);
  });
